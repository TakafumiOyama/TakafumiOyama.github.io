<html>
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="../css/style.css">
  <script language="javascript" type="text/javascript" src="../libraries/p5.js"></script>
  <script language="javascript" type="text/javascript" src="../libraries/p5.dom.js"></script>
  <!-- uncomment lines below to include extra p5 libraries -->
  <!--<script language="javascript" src="libraries/p5.dom.js"></script>-->
  <!--<script language="javascript" src="libraries/p5.sound.js"></script>-->
  <script type="text/javascript">
  // for centering the canvas
  var cnv;
  var video;
  var mosaicSize = 12;

  function setup() {
    createCanvas(654, 490);
    video = createVideo("../data/astero.mp4");
    video.hide();
    video.loop();
    noStroke();
    fill(0);
  }

  function draw() {
    background(255);
    video.loadPixels();
    var stepSize = round(constrain(mouseX / 8, 6, 32));
    for (var y=0; y<height; y+=stepSize) {
    for (var x=0; x<width; x+=stepSize) {
      var i = y * width + x;
      var darkness = (255 - video.pixels[i*4]) / 255;
      var radius = stepSize * darkness;
      var r = video.pixels[i*4];
      var g = video.pixels[i*4+1];
      var b = video.pixels[i*4+2];
      var c = color(r, g, b);
      fill(c);
      ellipse(x, y, radius, radius);
    }
  }
    //image(video, 0, 0, video.width, video.height);
  }
  </script>
  <!-- this line removes any default padding and style. you might only need one of these values set. -->
  <!--<style> body {padding: 10; margin: 10;} </style>-->
</head>

<body>
  <!--<p>test - Motion Capture</p>-->
</body>
</html>
